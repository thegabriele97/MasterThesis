
% facilitates the creation of memory maps. Start address at the bottom,
% end address at the top.
% syntax:
% \memsection{end address}{start address}{height in lines}{text in box}
\newcommand{\memsection}[4]{%
% define the height of the memsection
\bytefieldsetup{bitheight=#3\baselineskip}%
\bitbox[]{10}{%
\texttt{#1}% print end address
\\
% do some spacing
\vspace{#3\baselineskip}
\vspace{-2\baselineskip}
\vspace{-#3pt}
\texttt{#2}% print start address
}%
\bitbox{16}{#4}% print box with caption
}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{codered}{rgb}{0.8,0,0}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
\definecolor{NavyBlue}{rgb}{0,0,0.5}
\definecolor{orange}{rgb}{1,0.5,0}
% dark green
\definecolor{darkgreen}{rgb}{0,0.5,0}

\lstdefinestyle{preformatted}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstdefinestyle{tcl}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    % keywordstyle=\color{red},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    language=tcl,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2,
    morekeywords={*, create_pblock, get_pblocks, add_cells_to_pblock, get_cells, resize_pblock, set_property, open_run, write_bitstream, get_designs, create_ip, generate_target, get_ips, get_files, targets, connect, mrd},
    literate=*{\{}{{\textcolor{red}{\{}}}{1}
        {\}}{{\textcolor{red}{\}}}}{1}
        {[}{{\textcolor{red}{[}}}{1}
        {]}{{\textcolor{red}{]}}}{1}
        {(}{{\textcolor{red}{(}}}{1}
        {)}{{\textcolor{red}{)}}}{1}%
}

\lstdefinestyle{vhdl}{
    backgroundcolor=\color{backcolour},   
    language=vhdl,
    basicstyle=\ttfamily\footnotesize,
    columns=fixed,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstdefinestyle{C}{
    backgroundcolor=\color{backcolour},   
    language=C,
    basicstyle=\ttfamily\footnotesize,
    columns=fixed
}

\lstdefinestyle{Verilog}{
    backgroundcolor=\color{backcolour},   
    language=Verilog,
    basicstyle=\ttfamily\footnotesize,
    columns=fixed
}

\NewDocumentCommand{\busref}{som}{\texttt{%
#3%
\IfValueTF{#2}{[#2]}{}%
\IfBooleanTF{#1}{\#}{}%
}}